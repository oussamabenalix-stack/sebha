<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sebha Elegant | Oussama</title>
<style>
:root{
--primary:#00ffaa;
--secondary:#00cc88;
--reset:#ff4d4d;
--bg1:#16222a;
--bg2:#0f2027;
--text:#ffffff;
--shadow:rgba(0,0,0,0.3);
--progress: 0deg;
}

body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:linear-gradient(145deg,var(--bg1),var(--bg2));
font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
direction:rtl;
color:var(--text);
transition:background 0.5s ease;
overflow:hidden;
}

.dark{
--primary:#ffcc00;
--secondary:#ffaa00;
--reset:#ff5500;
--bg1:#1a1a1a;
--bg2:#000;
--text:#ffffff;
}

.container{
text-align:center;
width:320px;
position:relative;
padding:20px;
border-radius:20px;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(10px);
box-shadow:0 8px 32px var(--shadow);
animation: fadeInUp 1s ease-out;
transition: background 0.5s ease;
}

@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

.toggle, .btn{
width:140px;
padding:14px 0;
border:none;
border-radius:50px;
cursor:pointer;
font-weight:600;
font-size:16px;
color:#000;
transition:all 0.5s ease;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
position:relative;
overflow:hidden;
animation: slideIn 0.5s ease-out both;
}

.toggle{
margin-bottom:20px;
background:var(--primary);
animation-delay: 0.3s;
}

.btn-count{
animation-delay: 0.6s;
background: var(--primary);
}

.btn-reset{
animation-delay: 0.9s;
}

@keyframes slideIn {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

.btn-reset{
background:var(--reset);
color:#fff;
}

.btn:hover, .toggle:hover{
transform:translateY(-2px);
box-shadow:0 6px 20px rgba(0,0,0,0.3);
}

.circle{
width:220px;
height:220px;
border-radius:50%;
background:conic-gradient(var(--primary) 0deg, rgba(255,255,255,0.1) 0deg);
display:flex;
justify-content:center;
align-items:center;
margin:20px auto;
transition:transform 0.4s ease, box-shadow 0.4s ease, background 0.5s ease;
box-shadow:0 0 30px var(--primary);
position:relative;
animation: scaleIn 0.8s ease-out 0.6s both, glow 3s infinite alternate;
border: 2px solid rgba(255,255,255,0.1);
cursor: pointer;
}

.circle::before {
content: '';
position: absolute;
top: -3px;
left: -3px;
right: -3px;
bottom: -3px;
border-radius: 50%;
background: conic-gradient(var(--primary) var(--progress), transparent 0deg);
transition: background 0.3s ease;
z-index: -1;
}

@keyframes scaleIn {
from {
transform: scale(0);
opacity: 0;
}
to {
transform: scale(1);
opacity: 1;
}
}

@keyframes glow {
from {
box-shadow: 0 0 30px var(--primary);
}
to {
box-shadow: 0 0 50px var(--primary), 0 0 70px var(--primary);
}
}

.inner{
text-align:center;
background: rgba(0,0,0,0.4);
border-radius: 50%;
width: 100%;
height: 100%;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
backdrop-filter: blur(5px);
}

.zikr{
font-size:18px;
opacity:0.9;
margin-bottom:10px;
color: var(--text);
text-shadow: 0 0 5px rgba(0,0,0,0.5);
transition: color 0.5s ease;
}

.count{
font-size:48px;
font-weight:bold;
color:var(--text);
text-shadow:0 0 10px var(--primary);
transition: transform 0.2s ease, color 0.5s ease, text-shadow 0.5s ease;
}

.signature{
margin-top:20px;
font-size:12px;
opacity:0.7;
transition:opacity 1s ease, color 0.5s ease;
text-align: center;
font-weight: 300;
letter-spacing: 1px;
color: var(--text);
}

.instructions{
margin-top:10px;
font-size:10px;
opacity:0.5;
text-align: center;
color: var(--text);
font-weight: 300;
}

.btn span{
position:absolute;
border-radius:50%;
background:rgba(255,255,255,0.5);
transform:scale(0);
animation:ripple 0.6s linear;
pointer-events:none;
}

@keyframes ripple{
to{
transform:scale(6);
opacity:0;
}
}

@media (max-width:400px){
.container{
width:90%;
}
.circle{
width:180px;
height:180px;
}
.zikr{
font-size:18px;
}
.count{
font-size:36px;
}
}

/* Dialog Styles */
.dialog-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.5);
backdrop-filter: blur(5px);
display: none;
justify-content: center;
align-items: center;
z-index: 1000;
opacity: 0;
transition: opacity 0.3s ease-out;
}

.dialog-overlay.show {
opacity: 1;
}

.dialog {
background: rgba(255, 255, 255, 0.1);
backdrop-filter: blur(20px);
border-radius: 20px;
padding: 30px;
max-width: 400px;
width: 90%;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
animation: scaleInDialog 0.4s ease-out;
border: 1px solid rgba(255, 255, 255, 0.2);
}

.dialog-content {
text-align: center;
color: var(--text);
}

.dialog-content p {
font-size: 18px;
margin-bottom: 20px;
line-height: 1.5;
}

.dialog-btn {
background: var(--primary);
color: #000;
border: none;
padding: 12px 24px;
border-radius: 25px;
cursor: pointer;
font-weight: 600;
transition: all 0.3s ease, background 0.5s ease;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.dialog-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

@keyframes scaleInDialog {
from {
opacity: 0;
transform: scale(0.8) translateY(20px);
}
to {
opacity: 1;
transform: scale(1) translateY(0);
}
}
</style>
</head>
<body>

<div class="container">
<button class="toggle" id="toggleBtn" type="button">Toggle Mode</button>

<div class="circle" id="circle">
<div class="inner">
<div class="count" id="countDisplay">0</div>
<div class="zikr" id="zikr">سبحان الله</div>
</div>
</div>

<div style="margin-top:15px;">
<button class="btn btn-count" id="tasbih" type="button">Count</button>
<button class="btn btn-reset" id="reset" type="button">Reset</button>
</div>

<div class="signature">Sebha • by Oussama</div>
<div class="instructions">Click circle or press Space to count • R to reset • T to toggle mode</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
let count=0;
const zikrGroups=[
  {text:"سبحان الله", max:33, after:"أشهد أن لا إله إلا الله وأشهد أن محمدًا رسول الله"},
  {text:"الحمد لله", max:33, after:"أشهد أن لا إله إلا الله وأشهد أن محمدًا رسول الله"},
  {text:"الله أكبر", max:33, after:"لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير"}
];
let groupIndex=0;
let groupCount=0;

const zikrEl=document.getElementById("zikr");
const circle=document.getElementById("circle");
const toggle=document.getElementById("toggleBtn");
const countBtn=document.getElementById("tasbih");
const resetBtn=document.getElementById("reset");

// Dialog elements
const dialogOverlay = document.getElementById("dialog-overlay");
const dialogMessage = document.getElementById("dialog-message");
const dialogClose = document.getElementById("dialog-close");

// Dialog functions
function showDialog(message) {
  dialogMessage.textContent = message;
  dialogOverlay.style.display = "flex";
  setTimeout(() => dialogOverlay.classList.add('show'), 10);
}

function hideDialog() {
  dialogOverlay.classList.remove('show');
  setTimeout(() => dialogOverlay.style.display = "none", 300);
}

dialogClose.addEventListener("click", hideDialog);
dialogOverlay.addEventListener("click", (e) => {
  if (e.target === dialogOverlay) hideDialog();
});

document.getElementById("tasbih").addEventListener("click",(event)=>{increment();createRipple(countBtn, event)});
document.getElementById("reset").addEventListener("click",reset);

function increment(){
groupCount++;
count++;
zikrEl.textContent=zikrGroups[groupIndex].text;
const countEl = document.getElementById("countDisplay");
countEl.textContent = count;

animateProgress(groupCount / zikrGroups[groupIndex].max * 360);

circle.style.transform="scale(1.05) rotate(5deg)";
setTimeout(()=>circle.style.transform="scale(1) rotate(0deg)",150);
if(navigator.vibrate) navigator.vibrate(15);

if(groupCount>=zikrGroups[groupIndex].max){
showDialog(zikrGroups[groupIndex].after);
groupIndex++;
groupCount=0;
if(groupIndex>=zikrGroups.length) groupIndex=0;
animateProgress(0);
}
}

function reset(){
count=0;
groupIndex=0;
groupCount=0;
zikrEl.textContent=zikrGroups[0].text;
document.getElementById("countDisplay").textContent = count;
animateProgress(0);
circle.style.transform="scale(0.95)";
setTimeout(()=>circle.style.transform="scale(1)",150);
}

function createRipple(btn, event){
const span=document.createElement("span");
const d=Math.max(btn.clientWidth,btn.clientHeight);
span.style.width=span.style.height=d+"px";
span.style.left=event.offsetX - d/2 +"px";
span.style.top=event.offsetY - d/2 +"px";
btn.appendChild(span);
setTimeout(()=>span.remove(),600);
}

toggle.addEventListener("click",()=>{
document.body.classList.toggle("dark");
});


circle.addEventListener("click", increment);


document.addEventListener("keydown", (e) => {
  if (e.code === "Space") {
    e.preventDefault();
    increment();
  } else if (e.code === "KeyR") {
    reset();
  } else if (e.code === "KeyT") {
    toggle.click();
  }
});

// Animate progress smoothly
function animateProgress(toDeg) {
  let current = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--progress').replace('deg', '')) || 0;
  let start = Date.now();
  let duration = 300;
  let step = () => {
    let progress = (Date.now() - start) / duration;
    if (progress > 1) progress = 1;
    let currentDeg = current + (toDeg - current) * progress;
    document.documentElement.style.setProperty('--progress', `${currentDeg}deg`);
    if (progress < 1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}
});
</script>


<div id="dialog-overlay" class="dialog-overlay">
  <div class="dialog">
    <div class="dialog-content">
      <p id="dialog-message"></p>
      <button id="dialog-close" class="dialog-btn" type="button">OK</button>
    </div>
  </div>
</div>

</body>
</html>